(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(n,e,t){n.exports=t(49)},45:function(n,e,t){},49:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(15),c=t.n(i),o=t(17),u=t(7),l=t(19),d=t(14),f={incidents:[],isLoading:!1,error:"",filterBy:"",page:1};var s=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOAD_INDEX_REQUEST":return Object(d.a)({},n,{incidents:[],isLoading:!0,error:""});case"LOAD_INDEX_SUCCESS":return Object(d.a)({},n,{isLoading:!1,incidents:e.incidents||[]});case"LOAD_INDEX_FAILURE":return Object(d.a)({},n,{isLoading:!1,error:e.error});case"FILTER_INDEX":return Object(d.a)({},n,{filterBy:e.filterBy});case"PAGINATE":return Object(d.a)({},n,{page:e.page});default:return n}},p={},h=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;arguments.length>1&&arguments[1];return n},b=Object(u.combineReducers)({index:s,details:h}),m=t(29);t(45);var g=t(8),v=t(9),O=t(11),E=t(10),x=t(12),j=t(2),y=t(3),k=t(51),w=t(53),D=t(52),C=t(34);function I(){var n=Object(j.a)(["\n  height: 44px;\n  width: 100px;\n  border: 1px solid #000;\n  box-shadow: 2px 2px;\n\n  &:active {\n    box-shadow: 0 0;\n  }\n"]);return I=function(){return n},n}var L=y.a.button(I());function _(){var n=Object(j.a)(["\n  margin-left: 15px;\n"]);return _=function(){return n},n}function S(){var n=Object(j.a)(["\n  height: 40px;\n  width: 300px;\n  line-height: 1;\n  font-size: 16px;\n  vertical-align: middle;\n  padding-left: 5px;\n"]);return S=function(){return n},n}function N(){var n=Object(j.a)(["\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n"]);return N=function(){return n},n}var A=y.a.div(N()),P=y.a.input(S()),B=Object(y.a)(L)(_());var F=function(n){var e=n.onSearch,t=n.disabled,i=void 0!==t&&t,c=n.placeholder,o=void 0===c?"":c,u=n.searchValue,l=void 0===u?"":u,d=n.className,f=Object(r.useState)(l),s=Object(C.a)(f,2),p=s[0],h=s[1],b=function(){i||e(p)};return a.a.createElement(A,{className:d},a.a.createElement(P,{disabled:i,value:p,placeholder:o,onChange:function(n){return h(n.target.value)},onKeyUp:function(n){"Enter"===n.key&&b()}}),a.a.createElement(B,{onClick:function(){return b()}},"Find cases"))},T=t(24),U=function(n){return n.index.incidents},R=function(n){return n.index.isLoading},X=function(n){return n.index.error},z=function(n){return n.index.filterBy},M=function(n){return n.index.page},G=Object(T.a)(U,function(n){return n.length}),J=Object(T.a)(U,M,function(n,e){return n.slice(10*(e-1),10*e)}),Q="https://bikewise.org/api/v2/",V=function(n){if(!n.ok)throw new Error("".concat(n.status,": ").concat(n.statusText));return n.json()},q=function(){return function(n,e){var t=e(),r=z(t);M(t);n({type:"LOAD_INDEX_REQUEST"}),fetch("".concat(Q,"/incidents?proximity=berlin&query=").concat(r)).then(V).then(function(n){return n.incidents||[]}).then(function(e){n(function(n){return{type:"LOAD_INDEX_SUCCESS",incidents:n}}(e))}).catch(function(e){n({type:"LOAD_INDEX_FAILURE",error:e.message})})}};function K(n){return{type:"PAGINATE",page:n}}var W=t(50),H=t(32);function Y(){var n=Object(j.a)(["\n  align-self: flex-end;\n"]);return Y=function(){return n},n}function Z(){var n=Object(j.a)(["\n  display: flex;\n  margin-bottom: 30px;\n"]);return Z=function(){return n},n}function $(){var n=Object(j.a)(["\n  padding-top: 15px;\n  margin-bottom: 15px;\n  flex: 1;\n"]);return $=function(){return n},n}function nn(){var n=Object(j.a)(["\n  border: 1px solid #000;\n  width: 150px;\n  height: 150px;\n  flex: 0 0 auto;\n"]);return nn=function(){return n},n}function en(){var n=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  padding-left: 15px;\n  flex: 1;\n"]);return en=function(){return n},n}function tn(){var n=Object(j.a)(["\n  display: flex;\n  height: 200px;\n  padding: 30px 15px;\n  border: 3px solid #000;\n  margin-bottom: 30px;\n"]);return tn=function(){return n},n}var rn=y.a.div(tn()),an=y.a.div(en()),cn=y.a.img(nn()),on=y.a.div($()),un=y.a.div(Z()),ln=y.a.div(Y());var dn=function(n){var e=n.imageUrl,t=n.title,r=n.link,i=n.description,c=n.theftDate,o=n.reportDate,u=n.location;return a.a.createElement(rn,null,a.a.createElement(cn,{alt:"bike picture",src:e||"favicon.ico"}),a.a.createElement(an,null,a.a.createElement(W.a,{to:r},t),a.a.createElement(on,null,a.a.createElement(H.a,{lines:3,ellipsis:"..."},i)),a.a.createElement(un,null,a.a.createElement("span",null,c.toDateString()," - ",u)),a.a.createElement(ln,null,a.a.createElement("strong",null,"Updated:")," ",o.toDateString())))};function fn(n){var e=n.children;return a.a.createElement("span",{style:{color:"red"}},e)}function sn(){var n=Object(j.a)(["\n  width: 120px;\n"]);return sn=function(){return n},n}function pn(){var n=Object(j.a)(["\n  ","\n  width: 50px;\n"]);return pn=function(){return n},n}function hn(){var n=Object(j.a)(["\n  display: flex;\n\n  & > :not(:first-child) {\n    margin-left: 15px;\n  }\n"]);return hn=function(){return n},n}var bn=y.a.div(hn()),mn=Object(y.a)(L)(pn(),function(n){return n.selected?"box-shadow: 0 0;":""}),gn=Object(y.a)(L)(sn());function vn(n){var e=n.currentPage,t=n.perPage,r=n.totalCount,i=n.onPaginate,c=Math.floor(r/t)+1,o=function(n){n!==e&&i(n)},u=new Array(c).fill(null);return a.a.createElement(bn,null,a.a.createElement(gn,{onClick:function(){return i(1)}},"<< First"),a.a.createElement(gn,{onClick:function(){var n=e-1;n>=1&&i(n)}},"< Prev"),u.map(function(n,t){var r=t+1;return a.a.createElement(mn,{selected:r===e,onClick:o.bind(null,r),key:r},r)}),a.a.createElement(gn,{onClick:function(){var n=e+1;n<=c&&i(n)}},"Next >"),a.a.createElement(gn,{onClick:function(){return i(c)}},"Last >>"))}function On(){var n=Object(j.a)(["\n  margin-bottom: 20px;\n"]);return On=function(){return n},n}function En(){var n=Object(j.a)(["\n  text-align: right;\n  margin-bottom: 20px;\n"]);return En=function(){return n},n}var xn=y.a.div(En()),jn=Object(y.a)(F)(On()),yn=function(n){function e(){var n,t;Object(g.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(O.a)(this,(n=Object(E.a)(e)).call.apply(n,[this].concat(a)))).searchIncidents=function(n){t.props.applyFilter(n)},t.handlePaginate=function(n){t.props.paginate(n)},t}return Object(x.a)(e,n),Object(v.a)(e,[{key:"componentDidMount",value:function(){this.props.incidents.length||this.props.loadIndex()}},{key:"render",value:function(){var n=this.props,e=n.page,t=n.totalCount,r=n.incidents,i=n.isLoading,c=n.error,o=n.searchText;return a.a.createElement(a.a.Fragment,null,a.a.createElement(jn,{disabled:i,searchValue:o,onSearch:this.searchIncidents,placeholder:"Search case descriptions"}),Boolean(t)&&a.a.createElement(xn,null,"total: ",t),i&&"Loading...",!c&&!i&&0===r.length&&"No Results",Boolean(c)&&a.a.createElement(fn,null,"Ooops, something went wrong"),r.map(function(n){return a.a.createElement(dn,{key:n.id,imageUrl:n.media.image_url_thumb,title:n.title,link:"/case/".concat(n.id),location:n.address,description:n.description,theftDate:new Date(n.occurred_at),reportDate:new Date(n.updated_at)})}),Boolean(t)&&t>10&&a.a.createElement(vn,{currentPage:e,perPage:10,totalCount:t,onPaginate:this.handlePaginate}))}}]),e}(r.Component),kn=Object(o.b)(function(n){return{isLoading:R(n),incidents:J(n),totalCount:G(n),error:X(n),searchText:z(n),page:M(n)}},{loadIndex:q,applyFilter:function(n){return function(e){e({type:"FILTER_INDEX",filterBy:n}),e(K(1)),e(q())}},paginate:K})(yn),wn=function(n){function e(){return Object(g.a)(this,e),Object(O.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(x.a)(e,n),Object(v.a)(e,[{key:"render",value:function(){return"Details"}}]),e}(r.Component),Dn=function(n){function e(){return Object(g.a)(this,e),Object(O.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(x.a)(e,n),Object(v.a)(e,[{key:"render",value:function(){return"404 Page Not Found"}}]),e}(r.Component);function Cn(){var n=Object(j.a)(["\n  padding: 2% 15% 2% 2%;\n"]);return Cn=function(){return n},n}function In(){var n=Object(j.a)(["\n  background: #000;\n  opacity: 0.9;\n"]);return In=function(){return n},n}function Ln(){var n=Object(j.a)(["\n  display: inline-block;\n  margin-left: 15px;\n"]);return Ln=function(){return n},n}function _n(){var n=Object(j.a)(["\n  width: 60px;\n  height: 60px;\n"]);return _n=function(){return n},n}function Sn(){var n=Object(j.a)(["\n  background: url(img/illustration.png) center repeat;\n  background-size: contain;\n  height: 200px;\n  display: flex;\n  color: #fff;\n  padding: 2%;\n\n  h1,\n  h2 {\n    margin: 0;\n  }\n"]);return Sn=function(){return n},n}function Nn(){var n=Object(j.a)([""]);return Nn=function(){return n},n}var An=y.a.div(Nn()),Pn=y.a.header(Sn()),Bn=y.a.img(_n()),Fn=y.a.div(Ln()),Tn=y.a.div(In()),Un=y.a.div(Cn()),Rn=function(n){function e(){return Object(g.a)(this,e),Object(O.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(x.a)(e,n),Object(v.a)(e,[{key:"render",value:function(){return a.a.createElement(k.a,{basename:"/coding-challenge-frontend-react"},a.a.createElement(An,null,a.a.createElement(Pn,null,a.a.createElement(Bn,{src:"img/police-logo.svg"}),a.a.createElement(Fn,null,a.a.createElement(Tn,null,a.a.createElement("h1",null,"Police Department of Berlin"),a.a.createElement("h2",null,"Stolen bikes")))),a.a.createElement(Un,null,a.a.createElement(w.a,null,a.a.createElement(D.a,{exact:!0,path:"/",component:kn}),a.a.createElement(D.a,{path:"/case/:id",component:wn}),a.a.createElement(D.a,{component:Dn})))))}}]),e}(r.Component);c.a.render(a.a.createElement(o.a,{store:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.createStore)(b,n,Object(m.composeWithDevTools)(Object(u.applyMiddleware)(l.a)))}()},a.a.createElement(Rn,null)),document.getElementById("root"))}},[[37,2,1]]]);
//# sourceMappingURL=main.47545dcd.chunk.js.map