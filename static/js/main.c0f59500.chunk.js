(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(n,e,t){n.exports=t(50)},46:function(n,e,t){},50:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(16),c=t.n(i),o=t(15),u=t(13),l=t(20),s=t(12),d={incidents:[],isLoading:!1,error:"",filterBy:"",page:1};var p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOAD_INDEX_REQUEST":return Object(s.a)({},n,{incidents:[],isLoading:!0,error:""});case"LOAD_INDEX_SUCCESS":return Object(s.a)({},n,{isLoading:!1,incidents:e.incidents||[]});case"LOAD_INDEX_FAILURE":return Object(s.a)({},n,{isLoading:!1,error:e.error});case"FILTER_INDEX":return Object(s.a)({},n,{filterBy:e.filterBy});case"PAGINATE":return Object(s.a)({},n,{page:e.page});default:return n}},f={incident:null,isLoading:!1,error:""};var m=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOAD_DETAILS_REQUEST":return Object(s.a)({},n,{incident:null,isLoading:!0,error:""});case"LOAD_DETAILS_SUCCESS":return Object(s.a)({},n,{isLoading:!1,incident:e.incident});case"LOAD_DETAILS_FAILURE":return Object(s.a)({},n,{isLoading:!1,error:e.error});case"RESET_DETAILS":return f;default:return n}},g=Object(u.combineReducers)({index:p,details:m}),h=t(30);t(46);var b=t(8),v=t(7),E=t(10),O=t(9),j=t(11),x=t(2),y=t(3),D=t(53),L=t(55),I=t(54),S=t(35);function k(){var n=Object(x.a)(["\n  height: 44px;\n  width: 100px;\n  border: 1px solid #000;\n  box-shadow: 2px 2px;\n\n  &:active {\n    box-shadow: 0 0;\n  }\n"]);return k=function(){return n},n}var _=y.a.button(k());function C(){var n=Object(x.a)(["\n  margin-left: 15px;\n"]);return C=function(){return n},n}function w(){var n=Object(x.a)(["\n  height: 40px;\n  width: 300px;\n  line-height: 1;\n  font-size: 16px;\n  vertical-align: middle;\n  padding-left: 5px;\n"]);return w=function(){return n},n}function A(){var n=Object(x.a)(["\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n"]);return A=function(){return n},n}var T=y.a.div(A()),U=y.a.input(w()),N=Object(y.a)(_)(C());var F=function(n){var e=n.onSearch,t=n.disabled,i=void 0!==t&&t,c=n.placeholder,o=void 0===c?"":c,u=n.searchValue,l=void 0===u?"":u,s=n.className,d=Object(r.useState)(l),p=Object(S.a)(d,2),f=p[0],m=p[1],g=function(){i||e(f)};return a.a.createElement(T,{className:s},a.a.createElement(U,{disabled:i,value:f,placeholder:o,onChange:function(n){return m(n.target.value)},onKeyUp:function(n){"Enter"===n.key&&g()}}),a.a.createElement(N,{onClick:function(){return g()}},"Find cases"))},R=t(25),B=function(n){return n.index.incidents},P=function(n){return n.index.isLoading},M=function(n){return n.index.error},X=function(n){return n.index.filterBy},G=function(n){return n.index.page},J=Object(R.a)(B,function(n){return n.length}),z=Object(R.a)(B,G,function(n,e){return n.slice(10*(e-1),10*e)}),Q={api:"https://bikewise.org/api/v2/",publicUrl:"/coding-challenge-frontend-react"},W=function(n){if(!n.ok)throw new Error("".concat(n.status,": ").concat(n.statusText));return n.json()},q=function(){return function(n,e){var t=e(),r=X(t);G(t);n({type:"LOAD_INDEX_REQUEST"}),fetch("".concat(Q.api,"incidents?proximity=berlin&incident_type=theft&query=").concat(r)).then(W).then(function(n){return n.incidents||[]}).then(function(e){n(function(n){return{type:"LOAD_INDEX_SUCCESS",incidents:n}}(e))}).catch(function(e){n({type:"LOAD_INDEX_FAILURE",error:e.message})})}};function V(n){return{type:"PAGINATE",page:n}}var H=t(52),K=t(33);function Y(){var n=Object(x.a)(["\n  align-self: flex-end;\n"]);return Y=function(){return n},n}function Z(){var n=Object(x.a)(["\n  margin-bottom: 30px;\n"]);return Z=function(){return n},n}function $(){var n=Object(x.a)(["\n  padding-top: 15px;\n  margin-bottom: 15px;\n  flex: 1;\n"]);return $=function(){return n},n}function nn(){var n=Object(x.a)(["\n  border: 1px solid #000;\n  width: 150px;\n  height: 150px;\n  flex: 0 0 auto;\n"]);return nn=function(){return n},n}function en(){var n=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  padding-left: 15px;\n  flex: 1;\n"]);return en=function(){return n},n}function tn(){var n=Object(x.a)(["\n  display: flex;\n  height: 200px;\n  padding: 30px 15px;\n  border: 3px solid #000;\n  margin-bottom: 30px;\n"]);return tn=function(){return n},n}var rn=y.a.div(tn()),an=y.a.div(en()),cn=y.a.img(nn()),on=y.a.div($()),un=y.a.div(Z()),ln=y.a.div(Y());var sn=function(n){var e=n.imageUrl,t=n.title,r=n.link,i=n.description,c=n.theftDate,o=n.reportDate,u=n.location;return a.a.createElement(rn,null,a.a.createElement(cn,{alt:"bike picture",src:e||Q.publicUrl+"/favicon.ico"}),a.a.createElement(an,null,a.a.createElement(H.a,{to:r},t),a.a.createElement(on,null,a.a.createElement(K.a,{lines:3,ellipsis:"..."},i)),a.a.createElement(un,null,a.a.createElement("span",null,c.toDateString(),Boolean(u)&&" - ".concat(u))),a.a.createElement(ln,null,a.a.createElement("strong",null,"Updated:")," ",o.toDateString())))};function dn(){var n=Object(x.a)(["\n  width: 120px;\n"]);return dn=function(){return n},n}function pn(){var n=Object(x.a)(["\n  ","\n  width: 50px;\n"]);return pn=function(){return n},n}function fn(){var n=Object(x.a)(["\n  display: flex;\n\n  & > :not(:first-child) {\n    margin-left: 15px;\n  }\n"]);return fn=function(){return n},n}var mn=y.a.div(fn()),gn=Object(y.a)(_)(pn(),function(n){return n.selected?"box-shadow: 0 0;":""}),hn=Object(y.a)(_)(dn());function bn(n){var e=n.currentPage,t=n.perPage,r=n.totalCount,i=n.onPaginate,c=Math.floor(r/t)+1,o=function(n){n!==e&&i(n)},u=new Array(c).fill(null);return a.a.createElement(mn,null,a.a.createElement(hn,{onClick:function(){return i(1)}},"<< First"),a.a.createElement(hn,{onClick:function(){var n=e-1;n>=1&&i(n)}},"< Prev"),u.map(function(n,t){var r=t+1;return a.a.createElement(gn,{selected:r===e,onClick:o.bind(null,r),key:r},r)}),a.a.createElement(hn,{onClick:function(){var n=e+1;n<=c&&i(n)}},"Next >"),a.a.createElement(hn,{onClick:function(){return i(c)}},"Last >>"))}function vn(n){var e=n.children;return a.a.createElement("span",{style:{color:"red"}},e)}function En(n){var e=n.isLoading,t=n.error,r=n.isEmptyData;return a.a.createElement(a.a.Fragment,null,e&&"Loading...",!t&&!e&&r&&"No Results",Boolean(t)&&a.a.createElement(vn,null,"Ooops, something went wrong"))}function On(){var n=Object(x.a)(["\n  margin-bottom: 20px;\n"]);return On=function(){return n},n}function jn(){var n=Object(x.a)(["\n  text-align: right;\n  margin-bottom: 20px;\n"]);return jn=function(){return n},n}var xn=y.a.div(jn()),yn=Object(y.a)(F)(On()),Dn=function(n){function e(){var n,t;Object(b.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(E.a)(this,(n=Object(O.a)(e)).call.apply(n,[this].concat(a)))).searchIncidents=function(n){t.props.applyFilter(n)},t.handlePaginate=function(n){t.props.paginate(n)},t}return Object(j.a)(e,n),Object(v.a)(e,[{key:"componentDidMount",value:function(){this.props.incidents.length||this.props.loadIndex()}},{key:"render",value:function(){var n=this.props,e=n.page,t=n.totalCount,r=n.incidents,i=n.isLoading,c=n.error,o=n.searchText;return a.a.createElement(a.a.Fragment,null,a.a.createElement(yn,{disabled:i,searchValue:o,onSearch:this.searchIncidents,placeholder:"Search case descriptions"}),Boolean(t)&&a.a.createElement(xn,null,"total: ",t),a.a.createElement(En,{isLoading:i,error:c,isEmptyData:0===r.length}),r.map(function(n){return a.a.createElement(sn,{key:n.id,imageUrl:n.media.image_url_thumb,title:n.title,link:"/case/".concat(n.id),location:n.address,description:n.description,theftDate:new Date(n.occurred_at),reportDate:new Date(n.updated_at)})}),Boolean(t)&&t>10&&a.a.createElement(bn,{currentPage:e,perPage:10,totalCount:t,onPaginate:this.handlePaginate}))}}]),e}(r.Component),Ln=Object(o.b)(function(n){return{isLoading:P(n),incidents:z(n),totalCount:J(n),error:M(n),searchText:X(n),page:G(n)}},{loadIndex:q,applyFilter:function(n){return function(e){e({type:"FILTER_INDEX",filterBy:n}),e(V(1)),e(q())}},paginate:V})(Dn);var In=function(n){return n.details.incident},Sn=function(n){return n.details.isLoading},kn=function(n){return n.details.error},_n=t(19),Cn=t.n(_n);function wn(){var n=Object(x.a)(["\n  height: 350px;\n"]);return wn=function(){return n},n}Cn.a.accessToken="pk.eyJ1Ijoicm9tYW4tZyIsImEiOiJjanJ5dGI3dDIxMXB0NDRxeXlyaTFvbndoIn0.iM0e2kuvqM0ysHm6sXIjpg";var An=y.a.div(wn()),Tn=function(n){function e(n){var t;return Object(b.a)(this,e),(t=Object(E.a)(this,Object(O.a)(e).call(this,n))).map=void 0,t.mapContainer=void 0,t}return Object(j.a)(e,n),Object(v.a)(e,[{key:"getGeoCode",value:function(){var n="https://api.mapbox.com/geocoding/v5/mapbox.places/types=address&".concat(this.props.address,".json?access_token=").concat(Cn.a.accessToken);return fetch(n).then(function(n){return n.json()}).then(function(n){return n.features}).then(function(n){return n[0].geometry})}},{key:"configureMap",value:function(n,e){n.on("load",function(){n.addSource("single-point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),n.addLayer({id:"point",source:"single-point",type:"circle",paint:{"circle-radius":10,"circle-color":"#007cbf"}}),n.getSource("single-point").setData(e)})}}]),Object(v.a)(e,[{key:"componentDidMount",value:function(){var n=this;this.getGeoCode().then(function(e){n.map=new Cn.a.Map({container:n.mapContainer,style:"mapbox://styles/mapbox/streets-v11",zoom:14,center:e.coordinates}),n.configureMap(n.map,e)})}},{key:"componentWillUnmount",value:function(){this.map&&this.map.remove()}},{key:"render",value:function(){var n=this;return a.a.createElement(An,{ref:function(e){return n.mapContainer=e}})}}]),e}(r.Component);function Un(){var n=Object(x.a)(["\n  text-align: right;\n"]);return Un=function(){return n},n}function Nn(){var n=Object(x.a)(["\n  margin-bottom: 20px;\n"]);return Nn=function(){return n},n}function Fn(){var n=Object(x.a)(["\n  margin-top: 0;\n"]);return Fn=function(){return n},n}var Rn=y.a.h2(Fn()),Bn=y.a.div(Nn()),Pn=y.a.div(Un()),Mn=function(n){function e(){return Object(b.a)(this,e),Object(E.a)(this,Object(O.a)(e).apply(this,arguments))}return Object(j.a)(e,n),Object(v.a)(e,[{key:"componentDidMount",value:function(){this.props.loadTheftDetails(Number(this.props.match.params.id))}},{key:"componentWillUnmount",value:function(){this.props.resetDetails()}},{key:"render",value:function(){var n=this.props,e=n.details,t=n.isLoading,r=n.error;return e?Boolean(e)&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Rn,null,e.title),a.a.createElement(Bn,null,a.a.createElement("strong",null,"Stolen "),a.a.createElement("span",null,new Date(e.occurred_at).toDateString(),Boolean(e.address)&&" - ".concat(e.address))),a.a.createElement(Tn,{address:e.address}),a.a.createElement("h2",null,"DESCRIPTION OF INCIDENT"),a.a.createElement("p",null,e.description),a.a.createElement(Pn,null,a.a.createElement("strong",null,"Updated:")," ",new Date(e.updated_at).toDateString())):a.a.createElement(En,{isLoading:t,error:r,isEmptyData:!e})}}]),e}(r.Component),Xn=Object(o.b)(function(n){return{details:In(n),isLoading:Sn(n),error:kn(n)}},{loadTheftDetails:function(n){return function(e){e({type:"LOAD_DETAILS_REQUEST"}),fetch("".concat(Q.api,"incidents/").concat(n)).then(W).then(function(n){return n.incident}).then(function(n){e(function(n){return{type:"LOAD_DETAILS_SUCCESS",incident:n}}(n))}).catch(function(n){e({type:"LOAD_DETAILS_FAILURE",error:n.message})})}},resetDetails:function(){return{type:"RESET_DETAILS"}}})(Mn),Gn=function(n){function e(){return Object(b.a)(this,e),Object(E.a)(this,Object(O.a)(e).apply(this,arguments))}return Object(j.a)(e,n),Object(v.a)(e,[{key:"render",value:function(){return"404 Page Not Found"}}]),e}(r.Component);function Jn(){var n=Object(x.a)(["\n  padding: 2% 15% 2% 2%;\n"]);return Jn=function(){return n},n}function zn(){var n=Object(x.a)(["\n  background: #000;\n  opacity: 0.9;\n"]);return zn=function(){return n},n}function Qn(){var n=Object(x.a)(["\n  display: inline-block;\n  margin-left: 15px;\n"]);return Qn=function(){return n},n}function Wn(){var n=Object(x.a)(["\n  width: 60px;\n  height: 60px;\n"]);return Wn=function(){return n},n}function qn(){var n=Object(x.a)(["\n  background: url(",") center repeat;\n  background-size: contain;\n  height: 200px;\n  display: flex;\n  color: #fff;\n  padding: 2%;\n\n  h1,\n  h2 {\n    margin: 0;\n  }\n"]);return qn=function(){return n},n}function Vn(){var n=Object(x.a)([""]);return Vn=function(){return n},n}var Hn=y.a.div(Vn()),Kn=y.a.header(qn(),Q.publicUrl+"/img/illustration.png"),Yn=y.a.img(Wn()),Zn=y.a.div(Qn()),$n=y.a.div(zn()),ne=y.a.div(Jn()),ee=function(n){function e(){return Object(b.a)(this,e),Object(E.a)(this,Object(O.a)(e).apply(this,arguments))}return Object(j.a)(e,n),Object(v.a)(e,[{key:"render",value:function(){return a.a.createElement(D.a,{basename:"/coding-challenge-frontend-react"},a.a.createElement(Hn,null,a.a.createElement(Kn,null,a.a.createElement(Yn,{src:Q.publicUrl+"/img/police-logo.svg"}),a.a.createElement(Zn,null,a.a.createElement($n,null,a.a.createElement("h1",null,"Police Department of Berlin"),a.a.createElement("h2",null,"Stolen bikes")))),a.a.createElement(ne,null,a.a.createElement(L.a,null,a.a.createElement(I.a,{exact:!0,path:"/",component:Ln}),a.a.createElement(I.a,{path:"/case/:id(\\d+)",component:Xn}),a.a.createElement(I.a,{component:Gn})))))}}]),e}(r.Component);c.a.render(a.a.createElement(o.a,{store:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.createStore)(g,n,Object(h.composeWithDevTools)(Object(u.applyMiddleware)(l.a)))}()},a.a.createElement(ee,null)),document.getElementById("root"))}},[[38,2,1]]]);
//# sourceMappingURL=main.c0f59500.chunk.js.map