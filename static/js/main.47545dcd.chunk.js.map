{"version":3,"sources":["pages/index/reducer.ts","pages/details/reducer.ts","pages/rootReducer.ts","components/Button.tsx","components/SearchBar.tsx","pages/index/selectors.ts","pages/index/constants.ts","config/index.ts","utils/http.ts","pages/index/actions.ts","components/IncidentItem.tsx","components/Error.tsx","components/Pagination.tsx","pages/index/Index.tsx","pages/details/Details.tsx","pages/not-found/NotFound.tsx","App.tsx","index.tsx","store/index.ts"],"names":["initialState","incidents","isLoading","error","filterBy","page","indexReducer","state","arguments","length","undefined","action","type","Object","objectSpread","reducer","combineReducers","index","details","styled","button","_templateObject","SearchBarWrapper","div","SearchBar_templateObject","Input","input","_templateObject2","SearchButton","Button","_templateObject3","SearchBar","_ref","onSearch","_ref$disabled","disabled","_ref$placeholder","placeholder","_ref$searchValue","searchValue","className","_useState","useState","_useState2","slicedToArray","inputValue","setInputValue","initiateSearch","react_default","a","createElement","value","onChange","e","target","onKeyUp","event","key","onClick","getIncidents","getLoading","getError","getSearchText","getCurrentPage","getTotalCount","createSelector","getVisibleIncidents","currentPage","slice","config","getResponse","response","ok","Error","concat","status","statusText","json","loadIndex","dispatch","getState","fetch","then","res","loadIndexSuccess","catch","err","message","paginate","ItemWrapper","IncidentItem_templateObject","InfoWrapper","IncidentItem_templateObject2","Picture","img","IncidentItem_templateObject3","Description","_templateObject4","AdditionalInfo","_templateObject5","UpdatedDate","_templateObject6","IncidentItem","imageUrl","title","link","description","theftDate","reportDate","location","alt","src","Link","to","Truncate","lines","ellipsis","toDateString","children","style","color","PaginationWrapper","Pagination_templateObject","PageNumberButton","Pagination_templateObject2","props","selected","PaginationButton","Pagination_templateObject3","Pagination","perPage","totalCount","onPaginate","numberOfPages","Math","floor","handlePaginate","pagesArr","Array","fill","prevPage","map","_","bind","nextPage","TotalCount","Index_templateObject","Search","Index_templateObject2","Index","searchIncidents","str","_this","applyFilter","this","_this$props","searchText","Fragment","Boolean","Error_Error","incident","components_IncidentItem","id","media","image_url_thumb","address","Date","occurred_at","updated_at","Component","connect","Details","NotFound","AppWrapper","App_templateObject","Header","header","App_templateObject2","Logo","App_templateObject3","HeadingWrapper","App_templateObject4","Heading","App_templateObject5","ContentWrapper","App_templateObject6","App","BrowserRouter","basename","process","Switch","Route","exact","path","component","ReactDOM","render","es","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","configureStore","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.47545dcd.chunk.js","sourcesContent":["import { LoadIndexAction, IncidentData, FilterIndexAction, PaginateAction } from './actions';\n\nexport interface IndexState {\n  incidents: IncidentData[];\n  isLoading: boolean;\n  error: string;\n  filterBy: string;\n  page: number;\n}\n\nconst initialState: IndexState = {\n  incidents: [],\n  isLoading: false,\n  error: '',\n  filterBy: '',\n  page: 1,\n};\n\nexport function indexReducer(\n  state = initialState,\n  action: LoadIndexAction | FilterIndexAction | PaginateAction\n): IndexState {\n  switch (action.type) {\n    case 'LOAD_INDEX_REQUEST':\n      return { ...state, incidents: [], isLoading: true, error: '' };\n    case 'LOAD_INDEX_SUCCESS':\n      return { ...state, isLoading: false, incidents: action.incidents || [] };\n    case 'LOAD_INDEX_FAILURE':\n      return { ...state, isLoading: false, error: action.error };\n    case 'FILTER_INDEX':\n      return { ...state, filterBy: action.filterBy };\n    case 'PAGINATE':\n      return { ...state, page: action.page };\n    default:\n      return state;\n  }\n}\n\nexport default indexReducer;\n","import { Reducer } from \"redux\";\n\nconst initialState = {}\n\nconst reducer: Reducer = (state = initialState, action) => {\n  return state;\n};\n\nexport default reducer;\n","import { combineReducers, Action } from 'redux';\n\n// reducers\nimport index, { IndexState } from './index/reducer';\nimport details from './details/reducer';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\n\nexport interface IState {\n  index: IndexState;\n  details: any;\n}\n\nexport default combineReducers({\n  index,\n  details,\n});\n\nexport type ThunkResult<R> = ThunkAction<R, IState, null, Action>;\n\nexport type ThunkDispatch = ThunkDispatch<IState, null, Action>;\n","import styled from 'styled-components';\n\nexport default styled.button`\n  height: 44px;\n  width: 100px;\n  border: 1px solid #000;\n  box-shadow: 2px 2px;\n\n  &:active {\n    box-shadow: 0 0;\n  }\n`;\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport Button from './Button';\n\ninterface SearchBarProps {\n  onSearch: (str: string) => void;\n  disabled?: boolean;\n  searchValue?: string;\n  placeholder?: string;\n  className?: string;\n}\n\nconst SearchBarWrapper = styled.div`\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n`;\n\nconst Input = styled.input`\n  height: 40px;\n  width: 300px;\n  line-height: 1;\n  font-size: 16px;\n  vertical-align: middle;\n  padding-left: 5px;\n`;\n\nconst SearchButton = styled(Button)`\n  margin-left: 15px;\n`;\n\nfunction SearchBar({ onSearch, disabled = false, placeholder = '', searchValue = '', className }: SearchBarProps) {\n  // just wanted to try hooks so much :)\n  const [inputValue, setInputValue] = useState(searchValue);\n\n  const handleKeyUp = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Enter') {\n      initiateSearch();\n    }\n  };\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => setInputValue(e.target.value);\n  const handleButtonClick = () => initiateSearch();\n\n  const initiateSearch = () => {\n    if (!disabled) {\n      onSearch(inputValue);\n    }\n  };\n\n  return (\n    <SearchBarWrapper className={className}>\n      <Input\n        disabled={disabled}\n        value={inputValue}\n        placeholder={placeholder}\n        onChange={handleInputChange}\n        onKeyUp={handleKeyUp}\n      />\n      <SearchButton onClick={handleButtonClick}>Find cases</SearchButton>\n    </SearchBarWrapper>\n  );\n}\n\nexport default SearchBar;\n","import { ITEMS_PER_PAGE } from './constants';\nimport { createSelector } from 'reselect';\nimport { IState } from './../rootReducer';\n\nexport const getIncidents = (state: IState) => state.index.incidents;\nexport const getLoading = (state: IState) => state.index.isLoading;\nexport const getError = (state: IState) => state.index.error;\nexport const getSearchText = (state: IState) => state.index.filterBy;\nexport const getCurrentPage = (state: IState) => state.index.page;\n\nexport const getTotalCount = createSelector(\n  getIncidents,\n  incidents => incidents.length\n);\n\nexport const getVisibleIncidents = createSelector(\n  getIncidents,\n  getCurrentPage,\n  (incidents, currentPage) => incidents.slice((currentPage - 1) * ITEMS_PER_PAGE, currentPage * ITEMS_PER_PAGE)\n);\n","export const ITEMS_PER_PAGE = 10;\n","export default {\n  api: 'https://bikewise.org/api/v2/'\n}\n","export const getResponse = (response: Response) => {\n  if (!response.ok) {\n    throw new Error(`${response.status}: ${response.statusText}`);\n  }\n  return response.json();\n};\n","import { ITEMS_PER_PAGE } from './constants';\nimport { getSearchText, getCurrentPage } from './selectors';\nimport { IState, ThunkResult, ThunkDispatch } from './../rootReducer';\nimport config from '../../config';\nimport { Dispatch } from 'redux';\nimport { getResponse } from '../../utils/http';\n\nexport interface IncidentData {\n  id: number;\n  address: string;\n  description: string;\n  media: {\n    image_url: string;\n    image_url_thumb: string;\n  };\n  occurred_at: number;\n  source: {\n    name: string;\n    html_url: string;\n    api_url: string;\n  };\n  title: string;\n  type: string;\n  updated_at: number;\n  url: string;\n  type_properties?: any;\n  location_description?: any;\n  location_type?: any;\n}\n\nexport type LoadIndexAction =\n  | { type: 'LOAD_INDEX_REQUEST' }\n  | { type: 'LOAD_INDEX_SUCCESS'; incidents: IncidentData[] }\n  | { type: 'LOAD_INDEX_FAILURE'; error: string };\n\nexport interface FilterIndexAction {\n  type: 'FILTER_INDEX';\n  filterBy: string;\n}\n\nexport interface PaginateAction {\n  type: 'PAGINATE';\n  page: number;\n}\n\n// action creators\n// load actions\nexport const loadIndex: () => ThunkResult<void> = () => {\n  return (dispatch: Dispatch, getState: () => IState) => {\n    const state = getState();\n    const filterBy = getSearchText(state);\n    const page = getCurrentPage(state);\n\n    dispatch(loadIndexRequest());\n\n    fetch(`${config.api}/incidents?proximity=berlin&query=${filterBy}`)\n      .then(getResponse)\n      .then(res => res.incidents || [])\n      .then((incidents: IncidentData[]) => {\n        dispatch(loadIndexSuccess(incidents));\n      })\n      .catch(err => {\n        dispatch(loadIndexFailure(err.message));\n      });\n  };\n};\n\nexport function loadIndexRequest(): LoadIndexAction {\n  return { type: 'LOAD_INDEX_REQUEST' };\n}\n\nexport function loadIndexSuccess(incidents: IncidentData[]): LoadIndexAction {\n  return { type: 'LOAD_INDEX_SUCCESS', incidents };\n}\n\nexport function loadIndexFailure(error: string): LoadIndexAction {\n  return { type: 'LOAD_INDEX_FAILURE', error };\n}\n\n// filter actions\nexport function applyFilter(filterBy: string): ThunkResult<void> {\n  return (dispatch: ThunkDispatch) => {\n    dispatch({ type: 'FILTER_INDEX', filterBy });\n    dispatch(paginate(1));\n    dispatch(loadIndex());\n  };\n}\n\n// pagination actions\nexport function paginate(page: number) {\n  return { type: 'PAGINATE', page };\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport Truncate from 'react-truncate';\n\ninterface IncidentItemProps {\n  link: string;\n  imageUrl: string;\n  title: string;\n  description: string;\n  theftDate: Date;\n  reportDate: Date;\n  location: string;\n}\n\nconst ItemWrapper = styled.div`\n  display: flex;\n  height: 200px;\n  padding: 30px 15px;\n  border: 3px solid #000;\n  margin-bottom: 30px;\n`;\nconst InfoWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding-left: 15px;\n  flex: 1;\n`;\n\nconst Picture = styled.img`\n  border: 1px solid #000;\n  width: 150px;\n  height: 150px;\n  flex: 0 0 auto;\n`;\n\nconst Description = styled.div`\n  padding-top: 15px;\n  margin-bottom: 15px;\n  flex: 1;\n`;\n\nconst AdditionalInfo = styled.div`\n  display: flex;\n  margin-bottom: 30px;\n`;\n\nconst UpdatedDate = styled.div`\n  align-self: flex-end;\n`;\n\nfunction IncidentItem({ imageUrl, title, link, description, theftDate, reportDate, location }: IncidentItemProps) {\n  const descriptionMaxLength = 450; // number of characters\n\n  return (\n    <ItemWrapper>\n      <Picture alt=\"bike picture\" src={imageUrl || 'favicon.ico'} />\n      <InfoWrapper>\n        <Link to={link}>{title}</Link>\n        <Description>\n          <Truncate lines={3} ellipsis=\"...\">\n            {description}\n          </Truncate>\n        </Description>\n        <AdditionalInfo>\n          <span>\n            {theftDate.toDateString()} - {location}\n          </span>\n        </AdditionalInfo>\n        <UpdatedDate>\n          <strong>Updated:</strong> {reportDate.toDateString()}\n        </UpdatedDate>\n      </InfoWrapper>\n    </ItemWrapper>\n  );\n}\n\nexport default IncidentItem;\n","import React, { Props } from 'react';\n\nexport default function Error({ children }: Props<any>) {\n  return <span style={{ color: 'red' }}>{children}</span>;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport Button from './Button';\n\nconst PaginationWrapper = styled.div`\n  display: flex;\n\n  & > :not(:first-child) {\n    margin-left: 15px;\n  }\n`;\n\ninterface PageButtonProps {\n  selected: boolean;\n}\n\nconst PageNumberButton = styled(Button)`\n  ${(props: PageButtonProps) => (props.selected ? `box-shadow: 0 0;` : '')}\n  width: 50px;\n`;\n\nconst PaginationButton = styled(Button)`\n  width: 120px;\n`;\n\ninterface PaginationProps {\n  currentPage: number;\n  perPage: number;\n  totalCount: number;\n  onPaginate: (page: number) => void;\n}\n\nexport default function Pagination({ currentPage, perPage, totalCount, onPaginate }: PaginationProps) {\n  const numberOfPages = Math.floor(totalCount / perPage) + 1;\n\n  const handlePaginate = (page: number) => {\n    if (page !== currentPage) {\n      onPaginate(page);\n    }\n  };\n\n  const handleFirstPage = () => onPaginate(1);\n  const handleLastPage = () => onPaginate(numberOfPages);\n  const handlePrevPage = () => {\n    const prevPage = currentPage - 1;\n    if (prevPage >= 1) {\n      onPaginate(prevPage);\n    }\n  };\n  const handleNextPage = () => {\n    const nextPage = currentPage + 1;\n    if (nextPage <= numberOfPages) {\n      onPaginate(nextPage);\n    }\n  };\n\n  const pagesArr = new Array(numberOfPages).fill(null);\n\n  return (\n    <PaginationWrapper>\n      <PaginationButton onClick={handleFirstPage}>{'<< First'}</PaginationButton>\n      <PaginationButton onClick={handlePrevPage}>{'< Prev'}</PaginationButton>\n      {pagesArr.map((_, index) => {\n        const page = index + 1;\n\n        return (\n          <PageNumberButton selected={page === currentPage} onClick={handlePaginate.bind(null, page)} key={page}>\n            {page}\n          </PageNumberButton>\n        );\n      })}\n      <PaginationButton onClick={handleNextPage}>{'Next >'}</PaginationButton>\n      <PaginationButton onClick={handleLastPage}>{'Last >>'}</PaginationButton>\n    </PaginationWrapper>\n  );\n}\n","import React, { Component } from 'react';\nimport SearchBar from '../../components/SearchBar';\nimport { connect } from 'react-redux';\nimport { loadIndex, IncidentData, applyFilter, paginate } from './actions';\nimport styled from 'styled-components';\nimport { getVisibleIncidents, getTotalCount, getLoading, getError, getSearchText, getCurrentPage } from './selectors';\nimport { IState } from '../rootReducer';\nimport IncidentItem from '../../components/IncidentItem';\nimport Error from '../../components/Error';\nimport { ITEMS_PER_PAGE } from './constants';\nimport Pagination from '../../components/Pagination';\n\nconst TotalCount = styled.div`\n  text-align: right;\n  margin-bottom: 20px;\n`;\n\nconst Search = styled(SearchBar)`\n  margin-bottom: 20px;\n`;\n\ninterface IndexProps {\n  loadIndex: () => void;\n  applyFilter: (title: string) => void;\n  paginate: (page: number) => void;\n  totalCount: number;\n  incidents: IncidentData[];\n  isLoading: boolean;\n  error: string;\n  searchText: string;\n  page: number;\n}\n\nclass Index extends Component<IndexProps> {\n  componentDidMount() {\n    if (!this.props.incidents.length) {\n      this.props.loadIndex();\n    }\n  }\n\n  private searchIncidents = (str: string) => {\n    this.props.applyFilter(str);\n  };\n\n  private handlePaginate = (page: number) => {\n    this.props.paginate(page);\n  };\n\n  render() {\n    const { page, totalCount, incidents, isLoading, error, searchText } = this.props;\n    return (\n      <React.Fragment>\n        <Search\n          disabled={isLoading}\n          searchValue={searchText}\n          onSearch={this.searchIncidents}\n          placeholder=\"Search case descriptions\"\n        />\n\n        {Boolean(totalCount) && <TotalCount>total: {totalCount}</TotalCount>}\n\n        {isLoading && 'Loading...'}\n\n        {!error && !isLoading && incidents.length === 0 && 'No Results'}\n\n        {Boolean(error) && <Error>{'Ooops, something went wrong'}</Error>}\n\n        {incidents.map(incident => (\n          <IncidentItem\n            key={incident.id}\n            imageUrl={incident.media.image_url_thumb}\n            title={incident.title}\n            link={`/case/${incident.id}`}\n            location={incident.address}\n            description={incident.description}\n            theftDate={new Date(incident.occurred_at)}\n            reportDate={new Date(incident.updated_at)}\n          />\n        ))}\n        {Boolean(totalCount) && totalCount > ITEMS_PER_PAGE && (\n          <Pagination\n            currentPage={page}\n            perPage={ITEMS_PER_PAGE}\n            totalCount={totalCount}\n            onPaginate={this.handlePaginate}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(\n  (state: IState) => ({\n    isLoading: getLoading(state),\n    incidents: getVisibleIncidents(state),\n    totalCount: getTotalCount(state),\n    error: getError(state),\n    searchText: getSearchText(state),\n    page: getCurrentPage(state),\n  }),\n  { loadIndex, applyFilter, paginate }\n)(Index);\n","import React, { Component } from 'react';\n\nexport default class Details extends Component {\n  render() {\n    return 'Details';\n  }\n}\n","import React, { Component } from 'react';\n\nexport default class NotFound extends Component {\n  render() {\n    return '404 Page Not Found';\n  }\n}\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Index from './pages/index/Index';\nimport Details from './pages/details/Details';\nimport NotFound from './pages/not-found/NotFound';\n\nconst AppWrapper = styled.div``;\n\nconst Header = styled.header`\n  background: url(img/illustration.png) center repeat;\n  background-size: contain;\n  height: 200px;\n  display: flex;\n  color: #fff;\n  padding: 2%;\n\n  h1,\n  h2 {\n    margin: 0;\n  }\n`;\n\nconst Logo = styled.img`\n  width: 60px;\n  height: 60px;\n`;\n\nconst HeadingWrapper = styled.div`\n  display: inline-block;\n  margin-left: 15px;\n`;\n\nconst Heading = styled.div`\n  background: #000;\n  opacity: 0.9;\n`;\n\nconst ContentWrapper = styled.div`\n  padding: 2% 15% 2% 2%;\n`;\n\nclass App extends Component {\n  render() {\n    return (\n      <Router basename={process.env.PUBLIC_URL}>\n        <AppWrapper>\n          <Header>\n            <Logo src=\"img/police-logo.svg\" />\n            <HeadingWrapper>\n              <Heading>\n                <h1>Police Department of Berlin</h1>\n                <h2>Stolen bikes</h2>\n              </Heading>\n            </HeadingWrapper>\n          </Header>\n\n          <ContentWrapper>\n            <Switch>\n              <Route exact path=\"/\" component={Index} />\n              <Route path=\"/case/:id\" component={Details} />\n              <Route component={NotFound} />\n            </Switch>\n          </ContentWrapper>\n        </AppWrapper>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport configureStore from './store';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <Provider store={configureStore()}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from '../pages/rootReducer';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\n\nexport default function configureStore(initialState = {}) {\n  return createStore(rootReducer, initialState, composeWithDevTools(applyMiddleware(thunk)));\n}\n"],"sourceRoot":""}